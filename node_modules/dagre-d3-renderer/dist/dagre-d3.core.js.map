{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/util.js","webpack:///external \"d3\"","webpack:///external \"lodash\"","webpack:///./lib/label/add-label.js","webpack:///./lib/intersect/intersect-ellipse.js","webpack:///./lib/intersect/intersect-rect.js","webpack:///./lib/intersect/intersect-polygon.js","webpack:///./lib/intersect/intersect-circle.js","webpack:///./lib/intersect/intersect-node.js","webpack:///./lib/arrows.js","webpack:///./lib/shapes.js","webpack:///./lib/create-edge-paths.js","webpack:///./lib/create-edge-labels.js","webpack:///./lib/create-clusters.js","webpack:///./lib/label/add-svg-label.js","webpack:///./lib/label/add-html-label.js","webpack:///./lib/label/add-text-label.js","webpack:///./lib/create-nodes.js","webpack:///./lib/position-clusters.js","webpack:///./lib/position-edge-labels.js","webpack:///./lib/position-nodes.js","webpack:///external \"dagre-layout\"","webpack:///./lib/render.js","webpack:///./lib/intersect/intersect-line.js","webpack:///./lib/intersect/index.js","webpack:///./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","w","s","_lodash","ID_DELIM","escapeId","str","String","replace","isSubgraph","g","v","children","length","edgeToId","e","applyStyle","dom","styleFn","attr","applyClass","classFn","otherClasses","applyTransition","selection","graph","_lodash2","default","isPlainObject","transition","isFunction","require","root","node","location","label","labelSvg","append","labelType","_addSvgLabel2","_addHtmlLabel2","_addTextLabel2","labelBBox","getBBox","y","height","width","rx","ry","point","cx","x","cy","px","py","det","Math","sqrt","dx","abs","dy","h","sx","sy","_intersectLine","polyPoints","x1","y1","intersections","minX","Number","POSITIVE_INFINITY","minY","forEach","entry","min","left","top","p1","p2","intersect","_intersectLine2","push","sort","q","pdx","pdy","distp","qdx","qdy","distq","console","log","_intersectEllipse","_intersectEllipse2","_util","normal","parent","id","edge","type","path","style","_util2","vee","undirected","rect","bbox","shapeSvg","insert","_intersectRect2","ellipse","circle","max","_intersectCircle2","diamond","SQRT2","points","map","join","_intersectPolygon2","d3","createLine","line","curve","arrows","svgPaths","selectAll","data","edges","classed","svgPathsEnter","enter","sourceElem","elem","range","matrix","ownerSVGElement","getScreenCTM","inverse","multiply","translate","f","svgPathExit","exit","remove","select","source","this","getTotalLength","each","domEdge","arrowheadId","uniqueId","tail","head","slice","unshift","_intersectNode2","calcPoints","arrowhead","svgEdgeLabels","_addLabel2","labelId","has","clusters","nodes","filter","svgClusters","thisGroup","labelGroup","clusterLabelPos","domCluster","domNode","appendChild","labelStyle","fo","div","_typeof","html","client","getBoundingClientRect","lines","text","newText","escaped","ch","processEscapeSequences","split","shapes","simpleNodes","svgNodes","labelDom","shape","pick","paddingLeft","paddingRight","paddingTop","paddingBottom","shapeBBox","created","NODE_DEFAULT_ATTRS","EDGE_DEFAULT_ATTRS","curveLinear","createOrSelectGroup","empty","_createNodes","_createClusters","_createEdgeLabels","_createEdgePaths","_shapes","_arrows","fn","svg","defaults","paddingX","paddingY","padding","k","_prevWidth","_prevHeight","preProcessGraph","outputGroup","clustersGroup","edgePathsGroup","edgeLabels","_dagreLayout2","layout","maxX","maxY","undefined","_positionNodes2","_positionEdgeLabels2","_positionClusters2","postProcessGraph","createNodes","arguments","createClusters","createEdgeLabels","createEdgePaths","sameSign","r1","r2","q1","q2","a1","b1","c1","r3","r4","a2","b2","c2","denom","offset","num","polygon","render","util"],"mappings":"2BACA,IAAAA,KAMA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA8CA,OAzCAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAZ,EAAAmB,EAAA,SAAAjB,GACAY,OAAAC,eAAAb,EAAA,cAAiDkB,OAAA,KAIjDpB,EAAAqB,EAAA,SAAAlB,GACA,IAAAS,EAAAT,KAAAmB,WACA,WAA2B,OAAAnB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAU,EAAAC,GAAsD,OAAAV,OAAAW,UAAAC,eAAAnB,KAAAgB,EAAAC,IAGtDxB,EAAA2B,EAAA,GAGA3B,EAAA4B,KAIA5B,IAAA6B,EAAA,oFCzEA,MAAAC,EAAA9B,EAAA,uCAcA,IAAM+B,EAAW,KACjB,SAASC,EAAUC,GACjB,OAAOA,EAAMC,OAAOD,GAAKE,QAAQJ,EAAU,OAAS,cAgCpDK,WA1CF,SAAqBC,EAAGC,GACtB,QAASD,EAAEE,SAASD,GAAGE,QA0CvBC,SAvCF,SAAmBC,GACjB,OAAOV,EAASU,EAAEJ,GAAK,IAAMN,EAASU,EAAEd,GAAK,IAAMI,EAASU,EAAE/B,OAuC9DgC,WA/BF,SAAqBC,EAAKC,GACpBA,GACFD,EAAIE,KAAK,QAASD,IA8BpBE,WA1BF,SAAqBH,EAAKI,EAASC,GAC7BD,GACFJ,EACGE,KAAK,QAASE,GACdF,KAAK,QAASG,EAAe,IAAML,EAAIE,KAAK,WAuBjDI,gBAnBF,SAA0BC,EAAWd,GACnC,IAAMe,EAAQf,EAAEe,QAEhB,GAAIC,EAAAC,QAAEC,cAAcH,GAAQ,CAC1B,IAAMI,EAAaJ,EAAMI,WACzB,GAAIH,EAAAC,QAAEG,WAAWD,GACf,OAAOA,EAAWL,GAItB,OAAOA,mBC3CThD,EAAAD,QAAAwD,QAAA,qBCAAvD,EAAAD,QAAAwD,QAAA,yFCAA,QAAA1D,EAAA,SACAA,EAAA,SACAA,EAAA,kEAEA,SAAmB2D,EAAMC,EAAMC,GAC7B,IAAMC,EAAQF,EAAKE,MACbC,EAAWJ,EAAKK,OAAO,KAIN,QAAnBJ,EAAKK,WACP,EAAAC,EAAAZ,SAAYS,EAAUH,GACI,iBAAVE,GAAyC,SAAnBF,EAAKK,WAC3C,EAAAE,EAAAb,SAAaS,EAAUH,IAEvB,EAAAQ,EAAAd,SAAaS,EAAUH,GAGzB,IAAMS,EAAYN,EAASH,OAAOU,UAC9BC,SACJ,OAAQV,GACN,IAAK,MACHU,GAAMX,EAAKY,OAAS,EACpB,MACF,IAAK,SACHD,EAAKX,EAAKY,OAAS,EAAKH,EAAUG,OAClC,MACF,QACED,GAAMF,EAAUG,OAAS,EAK7B,OAHAT,EAASjB,KAAK,YACZ,cAAiBuB,EAAUI,MAAQ,EAAK,IAAMF,EAAI,KAE7CR,4FCjCT,SAA2BH,EAAMc,EAAIC,EAAIC,GAGvC,IAAMC,EAAKjB,EAAKkB,EACVC,EAAKnB,EAAKW,EAEVS,EAAKH,EAAKD,EAAME,EAChBG,EAAKF,EAAKH,EAAML,EAEhBW,EAAMC,KAAKC,KAAKV,EAAKA,EAAKO,EAAKA,EAAKN,EAAKA,EAAKK,EAAKA,GAErDK,EAAKF,KAAKG,IAAIZ,EAAKC,EAAKK,EAAKE,GAC7BN,EAAME,EAAID,IACZQ,GAAMA,GAER,IAAIE,EAAKJ,KAAKG,IAAIZ,EAAKC,EAAKM,EAAKC,GAKjC,OAJIN,EAAML,EAAIQ,IACZQ,GAAMA,IAGAT,EAAGD,EAAKQ,EAAId,EAAGQ,EAAKQ,6FCpB9B,SAAwB3B,EAAMgB,GAC5B,IAAME,EAAIlB,EAAKkB,EACTP,EAAIX,EAAKW,EAITc,EAAKT,EAAME,EAAIA,EACfS,EAAKX,EAAML,EAAIA,EACjB3C,EAAIgC,EAAKa,MAAQ,EACjBe,EAAI5B,EAAKY,OAAS,EAElBiB,SAAIC,SAiBR,OAhBIP,KAAKG,IAAIC,GAAM3D,EAAIuD,KAAKG,IAAID,GAAMG,GAEhCD,EAAK,IACPC,GAAKA,GAEPC,EAAY,IAAPF,EAAW,EAAIC,EAAIH,EAAKE,EAC7BG,EAAKF,IAGDH,EAAK,IACPzD,GAAKA,GAEP6D,EAAK7D,EACL8D,EAAY,IAAPL,EAAW,EAAIzD,EAAI2D,EAAKF,IAGvBP,EAAGA,EAAIW,EAAIlB,EAAGA,EAAImB,mFC5B5B,MAAAC,EAAA3F,EAAA,kDAMA,SAA2B4D,EAAMgC,EAAYhB,GAC3C,IAAMiB,EAAKjC,EAAKkB,EACVgB,EAAKlC,EAAKW,EAEVwB,KAEFC,EAAOC,OAAOC,kBACdC,EAAOF,OAAOC,kBAClBN,EAAWQ,QAAQ,SAAUC,GAC3BL,EAAOb,KAAKmB,IAAIN,EAAMK,EAAMvB,GAC5BqB,EAAOhB,KAAKmB,IAAIH,EAAME,EAAM9B,KAM9B,IAHA,IAAMgC,EAAOV,EAAKjC,EAAKa,MAAQ,EAAIuB,EAC7BQ,EAAMV,EAAKlC,EAAKY,OAAS,EAAI2B,EAE1B/F,EAAI,EAAGA,EAAIwF,EAAWpD,OAAQpC,GAAK,EAAG,CAC7C,IAAMqG,EAAKb,EAAWxF,GAChBsG,EAAKd,EAAWxF,EAAIwF,EAAWpD,OAAS,EAAIpC,EAAI,EAAI,GACpDuG,GAAY,EAAAC,EAAAtD,SAAcM,EAAMgB,GACnCE,EAAGyB,EAAOE,EAAG3B,EAAGP,EAAGiC,EAAMC,EAAGlC,IAAKO,EAAGyB,EAAOG,EAAG5B,EAAGP,EAAGiC,EAAME,EAAGnC,IAC5DoC,GACFZ,EAAcc,KAAKF,GAIvB,OAAKZ,EAAcvD,QAKfuD,EAAcvD,OAAS,GAEzBuD,EAAce,KAAK,SAAUnF,EAAGoF,GAC9B,IAAMC,EAAMrF,EAAEmD,EAAIF,EAAME,EAClBmC,EAAMtF,EAAE4C,EAAIK,EAAML,EAClB2C,EAAQ/B,KAAKC,KAAK4B,EAAMA,EAAMC,EAAMA,GAEpCE,EAAMJ,EAAEjC,EAAIF,EAAME,EAClBsC,EAAML,EAAExC,EAAIK,EAAML,EAClB8C,EAAQlC,KAAKC,KAAK+B,EAAMA,EAAMC,EAAMA,GAE1C,OAAQF,EAAQG,GAAU,EAAKH,IAAUG,EAAQ,EAAI,IAGlDtB,EAAc,KAlBnBuB,QAAQC,IAAI,4CAA6C3D,GAClDA,mFClCX,MAAA4D,EAAAxH,EAAA,iDAEA,SAA0B4D,EAAMc,EAAIE,GAClC,OAAO,EAAA6C,EAAAnE,SAAiBM,EAAMc,EAAIA,EAAIE,6FCHxC,SAAwBhB,EAAMgB,GAC5B,OAAOhB,EAAK+C,UAAU/B,mFCDxB,MAAA8C,EAAA1H,EAAA,uCAEA,SAAS2H,EAAQC,EAAQC,EAAIC,EAAMC,GACjC,IAUMC,EAVSJ,EAAO5D,OAAO,UAC1BlB,KAAK,KAAM+E,GACX/E,KAAK,UAAW,aAChBA,KAAK,OAAQ,GACbA,KAAK,OAAQ,GACbA,KAAK,cAAe,eACpBA,KAAK,cAAe,GACpBA,KAAK,eAAgB,GACrBA,KAAK,SAAU,QAEEkB,OAAO,QACxBlB,KAAK,IAAK,yBACVmF,MAAM,eAAgB,GACtBA,MAAM,mBAAoB,OAC7BC,EAAA5E,QAAKX,WAAWqF,EAAMF,EAAKC,EAAO,UAC9BD,EAAKC,EAAO,UACdC,EAAKlF,KAAK,QAASgF,EAAKC,EAAO,qBA+CjCJ,SACAQ,IA5CF,SAAcP,EAAQC,EAAIC,EAAMC,GAC9B,IAUMC,EAVSJ,EAAO5D,OAAO,UAC1BlB,KAAK,KAAM+E,GACX/E,KAAK,UAAW,aAChBA,KAAK,OAAQ,GACbA,KAAK,OAAQ,GACbA,KAAK,cAAe,eACpBA,KAAK,cAAe,GACpBA,KAAK,eAAgB,GACrBA,KAAK,SAAU,QAEEkB,OAAO,QACxBlB,KAAK,IAAK,+BACVmF,MAAM,eAAgB,GACtBA,MAAM,mBAAoB,OAC7BC,EAAA5E,QAAKX,WAAWqF,EAAMF,EAAKC,EAAO,UAC9BD,EAAKC,EAAO,UACdC,EAAKlF,KAAK,QAASgF,EAAKC,EAAO,WA4BjCK,WAxBF,SAAqBR,EAAQC,EAAIC,EAAMC,GACrC,IAUMC,EAVSJ,EAAO5D,OAAO,UAC1BlB,KAAK,KAAM+E,GACX/E,KAAK,UAAW,aAChBA,KAAK,OAAQ,GACbA,KAAK,OAAQ,GACbA,KAAK,cAAe,eACpBA,KAAK,cAAe,GACpBA,KAAK,eAAgB,GACrBA,KAAK,SAAU,QAEEkB,OAAO,QACxBlB,KAAK,IAAK,gBACVmF,MAAM,eAAgB,GACtBA,MAAM,mBAAoB,OAC7BC,EAAA5E,QAAKX,WAAWqF,EAAMF,EAAKC,EAAO,UAC9BD,EAAKC,EAAO,UACdC,EAAKlF,KAAK,QAASgF,EAAKC,EAAO,WAQjCzE,QAASqE,kFCrEX,QAAA3H,EAAA,QACAA,EAAA,QACAA,EAAA,QACAA,EAAA,kEAuEEqI,KArEF,SAAeT,EAAQU,EAAM1E,GAC3B,IAAM2E,EAAWX,EAAOY,OAAO,OAAQ,gBACpC1F,KAAK,KAAMc,EAAKc,IAChB5B,KAAK,KAAMc,EAAKe,IAChB7B,KAAK,KAAMwF,EAAK7D,MAAQ,GACxB3B,KAAK,KAAMwF,EAAK9D,OAAS,GACzB1B,KAAK,QAASwF,EAAK7D,OACnB3B,KAAK,SAAUwF,EAAK9D,QAMvB,OAJAZ,EAAK+C,UAAY,SAAU/B,GACzB,OAAO,EAAA6D,EAAAnF,SAAcM,EAAMgB,IAGtB2D,GAyDPG,QAtDF,SAAkBd,EAAQU,EAAM1E,GAC9B,IAAMc,EAAK4D,EAAK7D,MAAQ,EAClBE,EAAK2D,EAAK9D,OAAS,EACnB+D,EAAWX,EAAOY,OAAO,UAAW,gBACvC1F,KAAK,KAAMwF,EAAK7D,MAAQ,GACxB3B,KAAK,KAAMwF,EAAK9D,OAAS,GACzB1B,KAAK,KAAM4B,GACX5B,KAAK,KAAM6B,GAMd,OAJAf,EAAK+C,UAAY,SAAU/B,GACzB,OAAO,EAAA6C,EAAAnE,SAAiBM,EAAMc,EAAIC,EAAIC,IAGjC2D,GA0CPI,OAvCF,SAAiBf,EAAQU,EAAM1E,GAC7B,IAAMzC,EAAIgE,KAAKyD,IAAIN,EAAK7D,MAAO6D,EAAK9D,QAAU,EACxC+D,EAAWX,EAAOY,OAAO,SAAU,gBACtC1F,KAAK,KAAMwF,EAAK7D,MAAQ,GACxB3B,KAAK,KAAMwF,EAAK9D,OAAS,GACzB1B,KAAK,IAAK3B,GAMb,OAJAyC,EAAK+C,UAAY,SAAU/B,GACzB,OAAO,EAAAiE,EAAAvF,SAAgBM,EAAMzC,EAAGyD,IAG3B2D,GA6BPO,QAvBF,SAAkBlB,EAAQU,EAAM1E,GAC9B,IAAMhC,EAAK0G,EAAK7D,MAAQU,KAAK4D,MAAS,EAChCvD,EAAK8C,EAAK9D,OAASW,KAAK4D,MAAS,EACjCC,IACFlE,EAAG,EAAGP,GAAIiB,IACVV,GAAIlD,EAAG2C,EAAG,IACVO,EAAG,EAAGP,EAAGiB,IACTV,EAAGlD,EAAG2C,EAAG,IAEPgE,EAAWX,EAAOY,OAAO,UAAW,gBACvC1F,KAAK,SAAUkG,EAAOC,IAAI,SAAUtH,GAAK,OAAOA,EAAEmD,EAAI,IAAMnD,EAAE4C,IAAK2E,KAAK,MAM3E,OAJAtF,EAAK+C,UAAY,SAAUhF,GACzB,OAAO,EAAAwH,EAAA7F,SAAiBM,EAAMoF,EAAQrH,IAGjC4G,mFCtET,IAAYa,0JAAZpJ,EAAA,QACAA,EAAA,QAEAA,EAAA,QACAA,EAAA,uDAoEA,SAASqJ,EAAYvB,EAAMkB,GACzB,IAAMM,EAAOF,EAAGE,OACbxE,EAAE,SAAUpE,GAAK,OAAOA,EAAEoE,IAC1BP,EAAE,SAAU7D,GAAK,OAAOA,EAAE6D,IAI7B,OAFA+E,EAAKC,MAAMzB,EAAKyB,OAETD,EAAKN,aAzEd,SAA0B7F,EAAWd,EAAGmH,GACtC,IAAIC,EAAWtG,EAAUuG,UAAU,cAChCC,KAAKtH,EAAEuH,QAAS,SAAUlH,GAAK,OAAOwF,EAAA5E,QAAKb,SAASC,KACpDmH,QAAQ,UAAU,GAiDrB,OAiCF,SAAgBJ,EAAUpH,GACxB,IAAMyH,EAAgBL,EAASM,QAC5B/F,OAAO,KACPlB,KAAK,QAAS,YACdmF,MAAM,UAAW,GACpB6B,EAAc9F,OAAO,QAClBlB,KAAK,QAAS,QACdA,KAAK,IAAK,SAAUJ,GACnB,IAAMoF,EAAOzF,EAAEyF,KAAKpF,GACdsH,EAAa3H,EAAEuB,KAAKlB,EAAEJ,GAAG2H,KACzBjB,EAAS3F,EAAAC,QAAE4G,MAAMpC,EAAKkB,OAAOxG,QAAQyG,IAAI,WAAc,OAlB3DX,GADY2B,EAmBgED,GAlBhE1F,WAKTQ,GAJHqF,EAASF,EAAKG,gBAAgBC,eACjCC,UACAC,SAASN,EAAKI,gBACdG,UAAUlC,EAAK7D,MAAQ,EAAG6D,EAAK9D,OAAS,IACxB9B,EAAG6B,EAAG4F,EAAOM,GANlC,IAAoBR,EACZ3B,EACA6B,IAkBF,OAAOd,EAAWvB,EAAMkB,KAE5Bc,EAAc9F,OAAO,QA7FrB+F,CAAMN,EAAUpH,GAgGlB,SAAeoH,EAAUpH,GACvB,IAAMqI,EAAcjB,EAASkB,OAC7BzC,EAAA5E,QAAKJ,gBAAgBwH,EAAarI,GAC/B4F,MAAM,UAAW,GACjB2C,SAEH1C,EAAA5E,QAAKJ,gBAAgBwH,EAAYG,OAAO,aAAcxI,GACnDS,KAAK,IAAK,SAAUJ,GACnB,IAAMoI,EAASzI,EAAEuB,KAAKlB,EAAEJ,GAExB,GAAIwI,EAAQ,CACV,IAAM9B,EAAS3F,EAAAC,QAAE4G,MAAMa,KAAKC,kBAAkB/B,IAAI,WAAc,OAAO6B,IACvE,OAAOzB,KAAeL,GAEtB,OAAOI,EAAGyB,OAAOE,MAAMjI,KAAK,OA7GlC6H,CAAKlB,EAAUpH,GAEfoH,EAAWtG,EAAUuG,UAAU,cAE/BxB,EAAA5E,QAAKJ,gBAAgBuG,EAAUpH,GAC5B4F,MAAM,UAAW,GAGpBwB,EAASwB,KAAK,SAAUvI,GACtB,IAAMwI,EAAU9B,EAAGyB,OAAOE,MACpBjD,EAAOzF,EAAEyF,KAAKpF,GACpBoF,EAAKmC,KAAOc,KAERjD,EAAKD,IACPqD,EAAQpI,KAAK,KAAMgF,EAAKD,IAG1BK,EAAA5E,QAAKP,WAAWmI,EAASpD,EAAA,OACtBoD,EAAQrB,QAAQ,UAAY,UAAY,IAAM,cAGnDJ,EAASC,UAAU,aAChBuB,KAAK,SAAUvI,GACd,IAAMoF,EAAOzF,EAAEyF,KAAKpF,GACpBoF,EAAKqD,YAAc9H,EAAAC,QAAE8H,SAAS,aAE9B,IAAMF,EAAU9B,EAAGyB,OAAOE,MACvBjI,KAAK,aAAc,WAClB,MAAO,QAAUgF,EAAKqD,YAAc,MAErClD,MAAM,OAAQ,QAEjBC,EAAA5E,QAAKJ,gBAAgBgI,EAAS7I,GAC3BS,KAAK,IAAK,SAAUJ,GAAK,OAgBlC,SAAqBL,EAAGK,GACtB,IAAMoF,EAAOzF,EAAEyF,KAAKpF,GACd2I,EAAOhJ,EAAEuB,KAAKlB,EAAEJ,GAChBgJ,EAAOjJ,EAAEuB,KAAKlB,EAAEd,GAChBoH,EAASlB,EAAKkB,OAAOuC,MAAM,EAAGzD,EAAKkB,OAAOxG,OAAS,GAIzD,OAHAwG,EAAOwC,SAAQ,EAAAC,EAAAnI,SAAc+H,EAAMrC,EAAO,KAC1CA,EAAOnC,MAAK,EAAA4E,EAAAnI,SAAcgI,EAAMtC,EAAOA,EAAOxG,OAAS,KAEhD6G,EAAWvB,EAAMkB,GAxBe0C,CAAWrJ,EAAGK,KAEjDwF,EAAA5E,QAAKX,WAAWuI,EAASpD,EAAKG,SAGlCwB,EAASC,UAAU,UAAUkB,SAC7BnB,EAASC,UAAU,QAChBuB,KAAK,SAAUvI,GACd,IAAMoF,EAAOzF,EAAEyF,KAAKpF,IAEpBiJ,EADkBnC,EAAO1B,EAAK6D,YACpBvC,EAAGyB,OAAOE,MAAOjD,EAAKqD,YAAarD,EAAM,eAGhD2B,kFC1DT,IAAYL,0JAAZpJ,EAAA,QACAA,EAAA,QAEAA,EAAA,QACAA,EAAA,iEAEA,SAA2BmD,EAAWd,GACpC,IAAIuJ,EAAgBzI,EAAUuG,UAAU,eACrCC,KAAKtH,EAAEuH,QAAS,SAAUlH,GAAK,OAAOwF,EAAA5E,QAAKb,SAASC,KACpDmH,QAAQ,UAAU,GAwBrB,OAtBA+B,EAAclC,UAAU,KAAKkB,SAC7BgB,EAAc7B,QACX/F,OAAO,KACP6F,QAAQ,aAAa,GACrB5B,MAAM,UAAW,IAEpB2D,EAAgBzI,EAAUuG,UAAU,gBAEtBuB,KAAK,SAAUvI,GAC3B,IAAMoF,EAAOzF,EAAEyF,KAAKpF,GACdoB,GAAQ,EAAA+H,EAAAvI,SAAS8F,EAAGyB,OAAOE,MAAO1I,EAAEyF,KAAKpF,GAAI,EAAG,GAAGmH,QAAQ,SAAS,GACpEvB,EAAOxE,EAAMF,OAAOU,UAEtBwD,EAAKgE,SAAWhI,EAAMhB,KAAK,KAAMgF,EAAKgE,SACrCzI,EAAAC,QAAEyI,IAAIjE,EAAM,WAAYA,EAAKrD,MAAQ6D,EAAK7D,OAC1CpB,EAAAC,QAAEyI,IAAIjE,EAAM,YAAaA,EAAKtD,OAAS8D,EAAK9D,UAGnD0D,EAAA5E,QAAKJ,gBAAgB0I,EAAcjB,OAAQtI,GACxC4F,MAAM,UAAW,GACjB2C,SAEIgB,kFCjCT,IAAYxC,0JAAZpJ,EAAA,QAEAA,EAAA,QACAA,EAAA,iEAEA,SAAyBmD,EAAWd,GAClC,IAAM2J,EAAW3J,EAAE4J,QAAQC,OAAO,SAAU5J,GAAK,OAAO4F,EAAA5E,QAAKlB,WAAWC,EAAGC,KACvE6J,EAAchJ,EAAUuG,UAAU,aACnCC,KAAKqC,EAAU,SAAU1J,GAAK,OAAOA,IAmCxC,OAjCA6J,EAAYzC,UAAU,KAAKkB,SAC3BuB,EAAYpC,QACT/F,OAAO,KACPlB,KAAK,QAAS,WACdA,KAAK,KAAM,SAAUR,GAEpB,OADaD,EAAEuB,KAAKtB,GACRuF,KAEbI,MAAM,UAAW,GAEpBkE,EAAchJ,EAAUuG,UAAU,aAElCxB,EAAA5E,QAAKJ,gBAAgBiJ,EAAa9J,GAC/B4F,MAAM,UAAW,GAEpBkE,EAAYlB,KAAK,SAAU3I,GACzB,IAAMsB,EAAOvB,EAAEuB,KAAKtB,GACd8J,EAAYhD,EAAGyB,OAAOE,MAC5B3B,EAAGyB,OAAOE,MAAM/G,OAAO,QACvB,IAAMqI,EAAaD,EAAUpI,OAAO,KAAKlB,KAAK,QAAS,UACvD,EAAA+I,EAAAvI,SAAS+I,EAAYzI,EAAMA,EAAK0I,mBAGlCH,EAAYzC,UAAU,QAAQuB,KAAK,SAAUxK,GAC3C,IAAMmD,EAAOvB,EAAEuB,KAAKnD,GACd8L,EAAanD,EAAGyB,OAAOE,MAC7B7C,EAAA5E,QAAKX,WAAW4J,EAAY3I,EAAKqE,SAGnCC,EAAA5E,QAAKJ,gBAAgBiJ,EAAYxB,OAAQtI,GACtC4F,MAAM,UAAW,GACjB2C,SAEIuB,kFC3CT,MAAAzE,EAAA1H,EAAA,iDAEA,SAAsB2D,EAAMC,GAC1B,IAAM4I,EAAU7I,EAMhB,OAJA6I,EAAQ5I,OAAO6I,YAAY7I,EAAKE,OAEhCoE,EAAA5E,QAAKX,WAAW6J,EAAS5I,EAAK8I,YAEvBF,oSCTT9E,EAAA1H,EAAA,iDAEA,SAAuB2D,EAAMC,GAC3B,IAAM+I,EAAKhJ,EACRK,OAAO,iBACPlB,KAAK,QAAS,UAEX8J,EAAMD,EACT3I,OAAO,aACV4I,EAAI9J,KAAK,QAAS,gCAElB,IAAMgB,EAAQF,EAAKE,MACnB,gBAAeA,EAAf,YAAA+I,EAAe/I,IACb,IAAK,WACH8I,EAAIpE,OAAO1E,GACX,MACF,IAAK,SAEH8I,EAAIpE,OAAO,WAAc,OAAO1E,IAChC,MACF,QAAS8I,EAAIE,KAAKhJ,GAGpBoE,EAAA5E,QAAKX,WAAWiK,EAAKhJ,EAAK8I,YAC1BE,EAAI3E,MAAM,UAAW,gBAErB2E,EAAI3E,MAAM,cAAe,UAEzB,IAAM8E,EAASH,EAAIhJ,OAAOoJ,wBAK1B,OAJAL,EACG7J,KAAK,QAASiK,EAAOtI,OACrB3B,KAAK,SAAUiK,EAAOvI,QAElBmI,kFCjCT,MAAAjF,EAAA1H,EAAA,iDAKA,SAAuB2D,EAAMC,GAI3B,IAHA,IAAM4I,EAAU7I,EAAKK,OAAO,QAEtBiJ,EAeR,SAAiCC,GAI/B,IAHA,IAAIC,EAAU,GACVC,GAAU,EACVC,EAAK,KACAjN,EAAI,EAAGA,EAAI8M,EAAK1K,OAAQpC,GAAK,EAEpC,GADAiN,EAAKH,EAAK9M,GACNgN,EAAS,CACX,OAAQC,GACN,IAAK,IAAKF,GAAW,KAAM,MAC3B,QAASA,GAAWE,EAEtBD,GAAU,MACM,OAAPC,EACTD,GAAU,EAEVD,GAAWE,EAGf,OAAOF,EAjCOG,CAAuB1J,EAAKE,OAAOyJ,MAAM,MAC9CnN,EAAI,EAAGA,EAAI6M,EAAMzK,OAAQpC,GAAK,EACrCoM,EACGxI,OAAO,SACPlB,KAAK,YAAa,YAClBA,KAAK,KAAM,OACXA,KAAK,IAAK,KACVoK,KAAKD,EAAM7M,IAKhB,OAFA8H,EAAA5E,QAAKX,WAAW6J,EAAS5I,EAAK8I,YAEvBF,kFCpBT,QAAAxM,EAAA,IACYoJ,0JAAZpJ,EAAA,QAEAA,EAAA,QACAA,EAAA,iEAEA,SAAsBmD,EAAWd,EAAGmL,GAClC,IAAMC,EAAcpL,EAAE4J,QAAQC,OAAO,SAAU5J,GAAK,OAAQ4F,EAAA5E,QAAKlB,WAAWC,EAAGC,KAC3EoL,EAAWvK,EAAUuG,UAAU,UAChCC,KAAK8D,EAAa,SAAUnL,GAAK,OAAOA,IACxCuH,QAAQ,UAAU,GA6CrB,OA3CA6D,EAAShE,UAAU,KAAKkB,SACxB8C,EAAS3D,QACN/F,OAAO,KACPlB,KAAK,QAAS,QACdmF,MAAM,UAAW,IAEpByF,EAAWvK,EAAUuG,UAAU,WAEtBuB,KAAK,SAAU3I,GACtB,IAAMsB,EAAOvB,EAAEuB,KAAKtB,GACd8J,EAAYhD,EAAGyB,OAAOE,MAC5B7C,EAAA5E,QAAKP,WAAWqJ,EAAWxI,EAAA,OAAgBwI,EAAUvC,QAAQ,UAAY,UAAY,IAAM,QAC3F,IAAMwC,EAAaD,EAAUpI,OAAO,KAAKlB,KAAK,QAAS,SACjD6K,GAAW,EAAA9B,EAAAvI,SAAS+I,EAAYzI,GAChCgK,EAAQJ,EAAO5J,EAAKgK,OACpBtF,EAAOjF,EAAAC,QAAEuK,KAAKF,EAAS/J,OAAOU,UAAW,QAAS,UAExDV,EAAKqG,KAAOc,KAERnH,EAAKiE,IAAMuE,EAAUtJ,KAAK,KAAMc,EAAKiE,IACrCjE,EAAKkI,SAAWO,EAAWvJ,KAAK,KAAMc,EAAKkI,SAE3CzI,EAAAC,QAAEyI,IAAInI,EAAM,WAAY0E,EAAK7D,MAAQb,EAAKa,OAC1CpB,EAAAC,QAAEyI,IAAInI,EAAM,YAAa0E,EAAK9D,OAASZ,EAAKY,QAEhD8D,EAAK7D,OAASb,EAAKkK,YAAclK,EAAKmK,aACtCzF,EAAK9D,QAAUZ,EAAKoK,WAAapK,EAAKqK,cACtC5B,EAAWvJ,KAAK,YAAa,cACzBc,EAAKkK,YAAclK,EAAKmK,cAAgB,EAAK,KAC7CnK,EAAKoK,WAAapK,EAAKqK,eAAiB,EAAK,KAEjD,IAAM1F,EAAWqF,EAAMxE,EAAGyB,OAAOE,MAAOzC,EAAM1E,GAC9CsE,EAAA5E,QAAKX,WAAW4F,EAAU3E,EAAKqE,OAE/B,IAAMiG,EAAY3F,EAAS3E,OAAOU,UAClCV,EAAKa,MAAQyJ,EAAUzJ,MACvBb,EAAKY,OAAS0J,EAAU1J,SAG1B0D,EAAA5E,QAAKJ,gBAAgBwK,EAAS/C,OAAQtI,GACnC4F,MAAM,UAAW,GACjB2C,SAEI8C,kFCvDT,MAAYtE,0JAAZpJ,EAAA,IACA0H,EAAA1H,EAAA,iDAEA,SAA2BmD,EAAWd,GACpC,IAAM8L,EAAUhL,EAAU+I,OAAO,WAAc,OAAQ9C,EAAGyB,OAAOE,MAAMlB,QAAQ,YAE/E,SAASW,EAAWlI,GAClB,IAAMsB,EAAOvB,EAAEuB,KAAKtB,GACpB,MAAO,aAAesB,EAAKkB,EAAI,IAAMlB,EAAKW,EAAI,IAGhD4J,EAAQrL,KAAK,YAAa0H,GAE1BtC,EAAA5E,QAAKJ,gBAAgBC,EAAWd,GAC7B4F,MAAM,UAAW,GACjBnF,KAAK,YAAa0H,GAErBtC,EAAA5E,QAAKJ,gBAAgBiL,EAAQzE,UAAU,QAASrH,GAC7CS,KAAK,QAAS,SAAUR,GAAK,OAAOD,EAAEuB,KAAKtB,GAAGmC,QAC9C3B,KAAK,SAAU,SAAUR,GAAK,OAAOD,EAAEuB,KAAKtB,GAAGkC,SAC/C1B,KAAK,IAAK,SAAUR,GAEnB,OADaD,EAAEuB,KAAKtB,GACPmC,MAAQ,IAEtB3B,KAAK,IAAK,SAAUR,GAEnB,OADaD,EAAEuB,KAAKtB,GACPkC,OAAS,oFC1B5B,IAAY4E,0JAAZpJ,EAAA,QACAA,EAAA,QAEAA,EAAA,iEAEA,SAA6BmD,EAAWd,GAGtC,SAASmI,EAAW9H,GAClB,IAAMoF,EAAOzF,EAAEyF,KAAKpF,GACpB,OAAOW,EAAAC,QAAEyI,IAAIjE,EAAM,KAAO,aAAeA,EAAKhD,EAAI,IAAMgD,EAAKvD,EAAI,IAAM,GAJzDpB,EAAU+I,OAAO,WAAc,OAAQ9C,EAAGyB,OAAOE,MAAMlB,QAAQ,YAOvE/G,KAAK,YAAa0H,GAE1BtC,EAAA5E,QAAKJ,gBAAgBC,EAAWd,GAC7B4F,MAAM,UAAW,GACjBnF,KAAK,YAAa0H,mFCjBvB,MAAYpB,0JAAZpJ,EAAA,IAEA0H,EAAA1H,EAAA,iDAEA,SAAwBmD,EAAWd,GAGjC,SAASmI,EAAWlI,GAClB,IAAMsB,EAAOvB,EAAEuB,KAAKtB,GACpB,MAAO,aAAesB,EAAKkB,EAAI,IAAMlB,EAAKW,EAAI,IAJhCpB,EAAU+I,OAAO,WAAc,OAAQ9C,EAAGyB,OAAOE,MAAMlB,QAAQ,YAOvE/G,KAAK,YAAa0H,GAE1BtC,EAAA5E,QAAKJ,gBAAgBC,EAAWd,GAC7B4F,MAAM,UAAW,GACjBnF,KAAK,YAAa0H,mBChBvBrK,EAAAD,QAAAwD,QAAA,+FCAA,QAAA1D,EAAA,QACAA,EAAA,KACYoJ,0JAAZpJ,EAAA,QAEAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,uDAyHA,IAAMoO,GACJN,YAAa,GACbC,aAAc,GACdC,WAAY,GACZC,cAAe,GACfvJ,GAAI,EACJC,GAAI,EACJiJ,MAAO,QAGHS,GACJ1C,UAAW,SACXpC,MAAOH,EAAGkF,aAuEZ,SAASC,EAAqB5K,EAAMhD,GAClC,IAAIwC,EAAYQ,EAAKkH,OAAO,KAAOlK,GAInC,OAHIwC,EAAUqL,UACZrL,EAAYQ,EAAKK,OAAO,KAAKlB,KAAK,QAASnC,IAEtCwC,YA9MT,WACE,IAAIsL,YACAC,YACAC,YACAC,YACAC,YACAC,YAEEC,EAAK,SAAUC,EAAK3M,IA6H5B,SAA0BA,GACxBA,EAAE4J,QAAQ7F,QAAQ,SAAU9D,GAC1B,IAAMsB,EAAOvB,EAAEuB,KAAKtB,GACfe,EAAAC,QAAEyI,IAAInI,EAAM,UAAavB,EAAEE,SAASD,GAAGE,SAAUoB,EAAKE,MAAQxB,GAE/De,EAAAC,QAAEyI,IAAInI,EAAM,aACdP,EAAAC,QAAE2L,SAASrL,GACTkK,YAAalK,EAAKsL,SAClBnB,aAAcnK,EAAKsL,WAInB7L,EAAAC,QAAEyI,IAAInI,EAAM,aACdP,EAAAC,QAAE2L,SAASrL,GACToK,WAAYpK,EAAKuL,SACjBlB,cAAerK,EAAKuL,WAIpB9L,EAAAC,QAAEyI,IAAInI,EAAM,YACdP,EAAAC,QAAE2L,SAASrL,GACTkK,YAAalK,EAAKwL,QAClBrB,aAAcnK,EAAKwL,QACnBpB,WAAYpK,EAAKwL,QACjBnB,cAAerK,EAAKwL,UAIxB/L,EAAAC,QAAE2L,SAASrL,EAAMwK,GAEjB/K,EAAAC,QAAE2H,MAAM,cAAe,eAAgB,aAAc,iBAAkB,SAAUoE,GAC/EzL,EAAKyL,GAAKpJ,OAAOrC,EAAKyL,MAIpBhM,EAAAC,QAAEyI,IAAInI,EAAM,WAAYA,EAAK0L,WAAa1L,EAAKa,OAC/CpB,EAAAC,QAAEyI,IAAInI,EAAM,YAAaA,EAAK2L,YAAc3L,EAAKY,UAGvDnC,EAAEuH,QAAQxD,QAAQ,SAAU1D,GAC1B,IAAMoF,EAAOzF,EAAEyF,KAAKpF,GACfW,EAAAC,QAAEyI,IAAIjE,EAAM,WAAYA,EAAKhE,MAAQ,IAC1CT,EAAAC,QAAE2L,SAASnH,EAAMuG,KAtKjBmB,CAAgBnN,GAEhB2M,EAAItF,UAAU,KAAKkB,SAEnB,IAAM6E,EAAclB,EAAoBS,EAAK,UACvCU,EAAgBnB,EAAoBkB,EAAa,YACjDE,EAAiBpB,EAAoBkB,EAAa,aAClDG,EAAajB,EAAkBJ,EAAoBkB,EAAa,cAAepN,GAC/E4J,EAAQwC,EAAaF,EAAoBkB,EAAa,SAAUpN,EAAGwM,GAEzEgB,EAAAvM,QAAMwM,OAAOzN,GAEb,IAAI2D,EAAO,IACPG,EAAO,IACP4J,GAAQ,IACRC,GAAQ,IAEN5M,EAAQf,EACde,EAAM6I,QAAQhD,IAAI,SAAA5H,GAAA,OAAK+B,EAAMQ,KAAKvC,KAAI+E,QAAQ,SAAAxC,GAC5CoC,EAAOb,KAAKmB,IAAIN,EAAMpC,EAAKkB,EAAIlB,EAAKa,MAAQ,GAC5C0B,EAAOhB,KAAKmB,IAAIH,EAAMvC,EAAKW,EAAIX,EAAKY,OAAS,GAC7CuL,EAAO5K,KAAKyD,IAAImH,EAAMnM,EAAKkB,EAAIlB,EAAKa,MAAQ,GAC5CuL,EAAO7K,KAAKyD,IAAIoH,EAAMpM,EAAKW,EAAIX,EAAKY,OAAS,KAG/CpB,EAAMwG,QAAQxD,QAAQ,SAAA1D,GACpB,IAAMoF,EAAO1E,EAAM0E,KAAKpF,QACLuN,IAAfnI,EAAKhE,YAAkCmM,IAAXnI,EAAKhD,QAA8BmL,IAAXnI,EAAKvD,IAC3DyB,EAAOb,KAAKmB,IAAIN,EAAM8B,EAAKhD,EAAIgD,EAAKrD,MAAQ,GAC5C0B,EAAOhB,KAAKmB,IAAIH,EAAM2B,EAAKvD,EAAIuD,EAAKtD,OAAS,GAC7CuL,EAAO5K,KAAKyD,IAAImH,EAAMjI,EAAKhD,EAAIgD,EAAKrD,MAAQ,GAC5CuL,EAAO7K,KAAKyD,IAAIoH,EAAMlI,EAAKvD,EAAIuD,EAAKtD,OAAS,IAG/C,IADA,IAAMwE,EAASlB,EAAKkB,OAAOuC,MAAM,EAAGzD,EAAKkB,OAAOxG,OAAS,GAChDpC,EAAI,EAAGA,EAAI4I,EAAOxG,OAAQpC,IAAK,CACtC,IAAMwE,EAAQoE,EAAO5I,GACrB4F,EAAOb,KAAKmB,IAAIN,EAAMpB,EAAME,GAC5BqB,EAAOhB,KAAKmB,IAAIH,EAAMvB,EAAML,GAC5BwL,EAAO5K,KAAKyD,IAAImH,EAAMnL,EAAME,GAC5BkL,EAAO7K,KAAKyD,IAAIoH,EAAMpL,EAAML,MAIhCnB,EAAM4C,KAAOA,EACb5C,EAAM+C,KAAOA,EACb/C,EAAM2M,KAAOA,EACb3M,EAAM4M,KAAOA,GAEb,EAAAE,EAAA5M,SAAc2I,EAAO5J,IACrB,EAAA8N,EAAA7M,SAAmBsM,EAAYvN,GAC/BuM,EAAiBe,EAAgBtN,EAAGyM,GAEpC,IAAM9C,EAAW0C,EAAgBgB,EAAerN,IAChD,EAAA+N,EAAA9M,SAAiB0I,EAAU3J,GAqH/B,SAA2BA,GACzBgB,EAAAC,QAAE2H,KAAK5I,EAAE4J,QAAS,SAAU3J,GAC1B,IAAMsB,EAAOvB,EAAEuB,KAAKtB,GAGhBe,EAAAC,QAAEyI,IAAInI,EAAM,cACdA,EAAKa,MAAQb,EAAK0L,kBAEX1L,EAAKa,MAGVpB,EAAAC,QAAEyI,IAAInI,EAAM,eACdA,EAAKY,OAASZ,EAAK2L,mBAEZ3L,EAAKY,cAGPZ,EAAK0L,kBACL1L,EAAK2L,cArIZc,CAAiBhO,IAmDnB,OAhDA0M,EAAGuB,YAAc,SAAUlP,GACzB,OAAKmP,UAAU/N,QAGfiM,EAAerN,EACR2N,GAHEN,GAMXM,EAAGyB,eAAiB,SAAUpP,GAC5B,OAAKmP,UAAU/N,QAGfkM,EAAkBtN,EACX2N,GAHEL,GAMXK,EAAG0B,iBAAmB,SAAUrP,GAC9B,OAAKmP,UAAU/N,QAGfmM,EAAoBvN,EACb2N,GAHEJ,GAMXI,EAAG2B,gBAAkB,SAAUtP,GAC7B,OAAKmP,UAAU/N,QAGfoM,EAAmBxN,EACZ2N,GAHEH,GAMXG,EAAGvB,OAAS,SAAUpM,GACpB,OAAKmP,UAAU/N,QAGfqM,EAAUzN,EACH2N,GAHEF,GAMXE,EAAGvF,OAAS,SAAUpI,GACpB,OAAKmP,UAAU/N,QAGfsM,EAAU1N,EACH2N,GAHED,GAMJC,iCCtET,SAAS4B,EAAUC,EAAIC,GACrB,OAAOD,EAAKC,EAAK,6DAzDnB,SAAwBpK,EAAIC,EAAIoK,EAAIC,GAMlC,IAAMC,EAAKtK,EAAGnC,EAAIkC,EAAGlC,EACf0M,EAAKxK,EAAG3B,EAAI4B,EAAG5B,EACfoM,EAAMxK,EAAG5B,EAAI2B,EAAGlC,EAAMkC,EAAG3B,EAAI4B,EAAGnC,EAGhC4M,EAAOH,EAAKF,EAAGhM,EAAMmM,EAAKH,EAAGvM,EAAK2M,EAClCE,EAAOJ,EAAKD,EAAGjM,EAAMmM,EAAKF,EAAGxM,EAAK2M,EAIxC,GAAY,IAAPC,GAAqB,IAAPC,IAAaT,EAASQ,EAAIC,GAA7C,CAKA,IAAMC,EAAKN,EAAGxM,EAAIuM,EAAGvM,EACf+M,EAAKR,EAAGhM,EAAIiM,EAAGjM,EACfyM,EAAMR,EAAGjM,EAAIgM,EAAGvM,EAAMuM,EAAGhM,EAAIiM,EAAGxM,EAGhCqM,EAAMS,EAAK5K,EAAG3B,EAAMwM,EAAK7K,EAAGlC,EAAKgN,EACjCV,EAAMQ,EAAK3K,EAAG5B,EAAMwM,EAAK5K,EAAGnC,EAAKgN,EAKvC,GAAY,IAAPX,GAAqB,IAAPC,IAAcF,EAASC,EAAIC,GAA9C,CAKA,IAAMW,EAASR,EAAKM,EAAOD,EAAKJ,EAChC,GAAc,IAAVO,EAAJ,CAIA,IAAMC,EAAStM,KAAKG,IAAIkM,EAAQ,GAK5BE,EAAOT,EAAKM,EAAOD,EAAKJ,EAM5B,OAASpM,EALE4M,EAAM,GAAOA,EAAMD,GAAUD,GAAWE,EAAMD,GAAUD,EAKvDjN,GAHZmN,EAAOL,EAAKH,EAAOF,EAAKO,GACP,GAAOG,EAAMD,GAAUD,GAAWE,EAAMD,GAAUD,sFCvDrE,QAAAxR,EAAA,QACAA,EAAA,QACAA,EAAA,QACAA,EAAA,QACAA,EAAA,kEAGE4D,eACA+E,iBACAD,kBACAiJ,kBACAtJ,+FCXF,QAAArI,EAAA,SACAA,EAAA,SACAA,EAAA,kEAGE2G,oBACAiL,iBACAC","file":"dagre-d3.core.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssmbly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 25);\n","import _ from 'lodash'\n\n/*\n * Returns true if the specified node in the graph is a subgraph node. A\n * subgraph node is one that contains other nodes.\n */\nfunction isSubgraph (g, v) {\n  return !!g.children(v).length\n}\n\nfunction edgeToId (e) {\n  return escapeId(e.v) + ':' + escapeId(e.w) + ':' + escapeId(e.name)\n}\n\nconst ID_DELIM = /:/g\nfunction escapeId (str) {\n  return str ? String(str).replace(ID_DELIM, '\\\\:') : ''\n}\n\nfunction applyStyle (dom, styleFn) {\n  if (styleFn) {\n    dom.attr('style', styleFn)\n  }\n}\n\nfunction applyClass (dom, classFn, otherClasses) {\n  if (classFn) {\n    dom\n      .attr('class', classFn)\n      .attr('class', otherClasses + ' ' + dom.attr('class'))\n  }\n}\n\nfunction applyTransition (selection, g) {\n  const graph = g.graph()\n\n  if (_.isPlainObject(graph)) {\n    const transition = graph.transition\n    if (_.isFunction(transition)) {\n      return transition(selection)\n    }\n  }\n\n  return selection\n}\n\n// Public utility functions\nexport default {\n  isSubgraph,\n  edgeToId,\n  applyStyle,\n  applyClass,\n  applyTransition\n}\n","module.exports = require(\"d3\");","module.exports = require(\"lodash\");","import addTextLabel from './add-text-label'\nimport addHtmlLabel from './add-html-label'\nimport addSVGLabel from './add-svg-label'\n\nfunction addLabel (root, node, location) {\n  const label = node.label\n  const labelSvg = root.append('g')\n\n  // Allow the label to be a string, a function that returns a DOM element, or\n  // a DOM element itself.\n  if (node.labelType === 'svg') {\n    addSVGLabel(labelSvg, node)\n  } else if (typeof label !== 'string' || node.labelType === 'html') {\n    addHtmlLabel(labelSvg, node)\n  } else {\n    addTextLabel(labelSvg, node)\n  }\n\n  const labelBBox = labelSvg.node().getBBox()\n  let y\n  switch (location) {\n    case 'top':\n      y = (-node.height / 2)\n      break\n    case 'bottom':\n      y = (node.height / 2) - labelBBox.height\n      break\n    default:\n      y = (-labelBBox.height / 2)\n  }\n  labelSvg.attr('transform',\n    'translate(' + (-labelBBox.width / 2) + ',' + y + ')')\n\n  return labelSvg\n}\n\nexport default addLabel\n","function intersectEllipse (node, rx, ry, point) {\n  // Formulae from: http://mathworld.wolfram.com/Ellipse-LineIntersection.html\n\n  const cx = node.x\n  const cy = node.y\n\n  const px = cx - point.x\n  const py = cy - point.y\n\n  const det = Math.sqrt(rx * rx * py * py + ry * ry * px * px)\n\n  let dx = Math.abs(rx * ry * px / det)\n  if (point.x < cx) {\n    dx = -dx\n  }\n  let dy = Math.abs(rx * ry * py / det)\n  if (point.y < cy) {\n    dy = -dy\n  }\n\n  return {x: cx + dx, y: cy + dy}\n}\n\nexport default intersectEllipse\n","function intersectRect (node, point) {\n  const x = node.x\n  const y = node.y\n\n  // Rectangle intersection algorithm from:\n  // http://math.stackexchange.com/questions/108113/find-edge-between-two-boxes\n  const dx = point.x - x\n  const dy = point.y - y\n  let w = node.width / 2\n  let h = node.height / 2\n\n  let sx, sy\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    // Intersection is top or bottom of rect.\n    if (dy < 0) {\n      h = -h\n    }\n    sx = dy === 0 ? 0 : h * dx / dy\n    sy = h\n  } else {\n    // Intersection is left or right of rect.\n    if (dx < 0) {\n      w = -w\n    }\n    sx = w\n    sy = dx === 0 ? 0 : w * dy / dx\n  }\n\n  return {x: x + sx, y: y + sy}\n}\n\nexport default intersectRect\n","import intersectLine from './intersect-line'\n\n/*\n * Returns the point ({x, y}) at which the point argument intersects with the\n * node argument assuming that it has the shape specified by polygon.\n */\nfunction intersectPolygon (node, polyPoints, point) {\n  const x1 = node.x\n  const y1 = node.y\n\n  const intersections = []\n\n  let minX = Number.POSITIVE_INFINITY\n  let minY = Number.POSITIVE_INFINITY\n  polyPoints.forEach(function (entry) {\n    minX = Math.min(minX, entry.x)\n    minY = Math.min(minY, entry.y)\n  })\n\n  const left = x1 - node.width / 2 - minX\n  const top = y1 - node.height / 2 - minY\n\n  for (let i = 0; i < polyPoints.length; i += 1) {\n    const p1 = polyPoints[i]\n    const p2 = polyPoints[i < polyPoints.length - 1 ? i + 1 : 0]\n    const intersect = intersectLine(node, point,\n      {x: left + p1.x, y: top + p1.y}, {x: left + p2.x, y: top + p2.y})\n    if (intersect) {\n      intersections.push(intersect)\n    }\n  }\n\n  if (!intersections.length) {\n    console.log('NO INTERSECTION FOUND, RETURN NODE CENTER', node)\n    return node\n  }\n\n  if (intersections.length > 1) {\n    // More intersections, find the one nearest to edge end point\n    intersections.sort(function (p, q) {\n      const pdx = p.x - point.x\n      const pdy = p.y - point.y\n      const distp = Math.sqrt(pdx * pdx + pdy * pdy)\n\n      const qdx = q.x - point.x\n      const qdy = q.y - point.y\n      const distq = Math.sqrt(qdx * qdx + qdy * qdy)\n\n      return (distp < distq) ? -1 : (distp === distq ? 0 : 1)\n    })\n  }\n  return intersections[0]\n}\n\nexport default intersectPolygon\n","import intersectEllipse from './intersect-ellipse'\n\nfunction intersectCircle (node, rx, point) {\n  return intersectEllipse(node, rx, rx, point)\n}\n\nexport default intersectCircle\n","function intersectNode (node, point) {\n  return node.intersect(point)\n}\n\nexport default intersectNode\n","import util from './util'\n\nfunction normal (parent, id, edge, type) {\n  const marker = parent.append('marker')\n    .attr('id', id)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 9)\n    .attr('refY', 5)\n    .attr('markerUnits', 'strokeWidth')\n    .attr('markerWidth', 8)\n    .attr('markerHeight', 6)\n    .attr('orient', 'auto')\n\n  const path = marker.append('path')\n    .attr('d', 'M 0 0 L 10 5 L 0 10 z')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0')\n  util.applyStyle(path, edge[type + 'Style'])\n  if (edge[type + 'Class']) {\n    path.attr('class', edge[type + 'Class'])\n  }\n}\n\nfunction vee (parent, id, edge, type) {\n  const marker = parent.append('marker')\n    .attr('id', id)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 9)\n    .attr('refY', 5)\n    .attr('markerUnits', 'strokeWidth')\n    .attr('markerWidth', 8)\n    .attr('markerHeight', 6)\n    .attr('orient', 'auto')\n\n  const path = marker.append('path')\n    .attr('d', 'M 0 0 L 10 5 L 0 10 L 4 5 z')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0')\n  util.applyStyle(path, edge[type + 'Style'])\n  if (edge[type + 'Class']) {\n    path.attr('class', edge[type + 'Class'])\n  }\n}\n\nfunction undirected (parent, id, edge, type) {\n  const marker = parent.append('marker')\n    .attr('id', id)\n    .attr('viewBox', '0 0 10 10')\n    .attr('refX', 9)\n    .attr('refY', 5)\n    .attr('markerUnits', 'strokeWidth')\n    .attr('markerWidth', 8)\n    .attr('markerHeight', 6)\n    .attr('orient', 'auto')\n\n  const path = marker.append('path')\n    .attr('d', 'M 0 5 L 10 5')\n    .style('stroke-width', 1)\n    .style('stroke-dasharray', '1,0')\n  util.applyStyle(path, edge[type + 'Style'])\n  if (edge[type + 'Class']) {\n    path.attr('class', edge[type + 'Class'])\n  }\n}\n\nexport default {\n  normal,\n  vee,\n  undirected,\n  default: normal\n}\n","import intersectRect from './intersect/intersect-rect'\nimport intersectEllipse from './intersect/intersect-ellipse'\nimport intersectCircle from './intersect/intersect-circle'\nimport intersectPolygon from './intersect/intersect-polygon'\n\nfunction rect (parent, bbox, node) {\n  const shapeSvg = parent.insert('rect', ':first-child')\n    .attr('rx', node.rx)\n    .attr('ry', node.ry)\n    .attr('x', -bbox.width / 2)\n    .attr('y', -bbox.height / 2)\n    .attr('width', bbox.width)\n    .attr('height', bbox.height)\n\n  node.intersect = function (point) {\n    return intersectRect(node, point)\n  }\n\n  return shapeSvg\n}\n\nfunction ellipse (parent, bbox, node) {\n  const rx = bbox.width / 2\n  const ry = bbox.height / 2\n  const shapeSvg = parent.insert('ellipse', ':first-child')\n    .attr('x', -bbox.width / 2)\n    .attr('y', -bbox.height / 2)\n    .attr('rx', rx)\n    .attr('ry', ry)\n\n  node.intersect = function (point) {\n    return intersectEllipse(node, rx, ry, point)\n  }\n\n  return shapeSvg\n}\n\nfunction circle (parent, bbox, node) {\n  const r = Math.max(bbox.width, bbox.height) / 2\n  const shapeSvg = parent.insert('circle', ':first-child')\n    .attr('x', -bbox.width / 2)\n    .attr('y', -bbox.height / 2)\n    .attr('r', r)\n\n  node.intersect = function (point) {\n    return intersectCircle(node, r, point)\n  }\n\n  return shapeSvg\n}\n\n// Circumscribe an ellipse for the bounding box with a diamond shape. I derived\n// the function to calculate the diamond shape from:\n// http://mathforum.org/kb/message.jspa?messageID=3750236\nfunction diamond (parent, bbox, node) {\n  const w = (bbox.width * Math.SQRT2) / 2\n  const h = (bbox.height * Math.SQRT2) / 2\n  const points = [\n    { x: 0, y: -h },\n    { x: -w, y: 0 },\n    { x: 0, y: h },\n    { x: w, y: 0 }\n  ]\n  const shapeSvg = parent.insert('polygon', ':first-child')\n    .attr('points', points.map(function (p) { return p.x + ',' + p.y }).join(' '))\n\n  node.intersect = function (p) {\n    return intersectPolygon(node, points, p)\n  }\n\n  return shapeSvg\n}\n\nexport default {\n  rect,\n  ellipse,\n  circle,\n  diamond\n}\n","import * as d3 from 'd3'\nimport _ from 'lodash'\n\nimport intersectNode from './intersect/intersect-node'\nimport util from './util'\n\nfunction createEdgePaths (selection, g, arrows) {\n  let svgPaths = selection.selectAll('g.edgePath')\n    .data(g.edges(), function (e) { return util.edgeToId(e) })\n    .classed('update', true)\n\n  enter(svgPaths, g)\n  exit(svgPaths, g)\n\n  svgPaths = selection.selectAll('g.edgePath')\n\n  util.applyTransition(svgPaths, g)\n    .style('opacity', 1)\n\n  // Save DOM element in the path group, and set ID and class\n  svgPaths.each(function (e) {\n    const domEdge = d3.select(this)\n    const edge = g.edge(e)\n    edge.elem = this\n\n    if (edge.id) {\n      domEdge.attr('id', edge.id)\n    }\n\n    util.applyClass(domEdge, edge['class'],\n      (domEdge.classed('update') ? 'update ' : '') + 'edgePath')\n  })\n\n  svgPaths.selectAll('path.path')\n    .each(function (e) {\n      const edge = g.edge(e)\n      edge.arrowheadId = _.uniqueId('arrowhead')\n\n      const domEdge = d3.select(this)\n        .attr('marker-end', function () {\n          return 'url(#' + edge.arrowheadId + ')'\n        })\n        .style('fill', 'none')\n\n      util.applyTransition(domEdge, g)\n        .attr('d', function (e) { return calcPoints(g, e) })\n\n      util.applyStyle(domEdge, edge.style)\n    })\n\n  svgPaths.selectAll('defs *').remove()\n  svgPaths.selectAll('defs')\n    .each(function (e) {\n      const edge = g.edge(e)\n      const arrowhead = arrows[edge.arrowhead]\n      arrowhead(d3.select(this), edge.arrowheadId, edge, 'arrowhead')\n    })\n\n  return svgPaths\n}\n\nfunction calcPoints (g, e) {\n  const edge = g.edge(e)\n  const tail = g.node(e.v)\n  const head = g.node(e.w)\n  const points = edge.points.slice(1, edge.points.length - 1)\n  points.unshift(intersectNode(tail, points[0]))\n  points.push(intersectNode(head, points[points.length - 1]))\n\n  return createLine(edge, points)\n}\n\nfunction createLine (edge, points) {\n  const line = d3.line()\n    .x(function (d) { return d.x })\n    .y(function (d) { return d.y })\n\n  line.curve(edge.curve)\n\n  return line(points)\n}\n\nfunction getCoords (elem) {\n  const bbox = elem.getBBox()\n  const matrix = elem.ownerSVGElement.getScreenCTM()\n    .inverse()\n    .multiply(elem.getScreenCTM())\n    .translate(bbox.width / 2, bbox.height / 2)\n  return { x: matrix.e, y: matrix.f }\n}\n\nfunction enter (svgPaths, g) {\n  const svgPathsEnter = svgPaths.enter()\n    .append('g')\n    .attr('class', 'edgePath')\n    .style('opacity', 0)\n  svgPathsEnter.append('path')\n    .attr('class', 'path')\n    .attr('d', function (e) {\n      const edge = g.edge(e)\n      const sourceElem = g.node(e.v).elem\n      const points = _.range(edge.points.length).map(function () { return getCoords(sourceElem) })\n      return createLine(edge, points)\n    })\n  svgPathsEnter.append('defs')\n}\n\nfunction exit (svgPaths, g) {\n  const svgPathExit = svgPaths.exit()\n  util.applyTransition(svgPathExit, g)\n    .style('opacity', 0)\n    .remove()\n\n  util.applyTransition(svgPathExit.select('path.path'), g)\n    .attr('d', function (e) {\n      const source = g.node(e.v)\n\n      if (source) {\n        const points = _.range(this.getTotalLength()).map(function () { return source })\n        return createLine({}, points)\n      } else {\n        return d3.select(this).attr('d')\n      }\n    })\n}\n\nexport default createEdgePaths\n","import * as d3 from 'd3'\nimport _ from 'lodash'\n\nimport addLabel from './label/add-label'\nimport util from './util'\n\nfunction createEdgeLabels (selection, g) {\n  let svgEdgeLabels = selection.selectAll('g.edgeLabel')\n    .data(g.edges(), function (e) { return util.edgeToId(e) })\n    .classed('update', true)\n\n  svgEdgeLabels.selectAll('*').remove()\n  svgEdgeLabels.enter()\n    .append('g')\n    .classed('edgeLabel', true)\n    .style('opacity', 0)\n\n  svgEdgeLabels = selection.selectAll('g.edgeLabel')\n\n  svgEdgeLabels.each(function (e) {\n    const edge = g.edge(e)\n    const label = addLabel(d3.select(this), g.edge(e), 0, 0).classed('label', true)\n    const bbox = label.node().getBBox()\n\n    if (edge.labelId) { label.attr('id', edge.labelId) }\n    if (!_.has(edge, 'width')) { edge.width = bbox.width }\n    if (!_.has(edge, 'height')) { edge.height = bbox.height }\n  })\n\n  util.applyTransition(svgEdgeLabels.exit(), g)\n    .style('opacity', 0)\n    .remove()\n\n  return svgEdgeLabels\n}\n\nexport default createEdgeLabels\n","import * as d3 from 'd3'\n\nimport util from './util'\nimport addLabel from './label/add-label'\n\nfunction createClusters (selection, g) {\n  const clusters = g.nodes().filter(function (v) { return util.isSubgraph(g, v) })\n  let svgClusters = selection.selectAll('g.cluster')\n    .data(clusters, function (v) { return v })\n\n  svgClusters.selectAll('*').remove()\n  svgClusters.enter()\n    .append('g')\n    .attr('class', 'cluster')\n    .attr('id', function (v) {\n      const node = g.node(v)\n      return node.id\n    })\n    .style('opacity', 0)\n\n  svgClusters = selection.selectAll('g.cluster')\n\n  util.applyTransition(svgClusters, g)\n    .style('opacity', 1)\n\n  svgClusters.each(function (v) {\n    const node = g.node(v)\n    const thisGroup = d3.select(this)\n    d3.select(this).append('rect')\n    const labelGroup = thisGroup.append('g').attr('class', 'label')\n    addLabel(labelGroup, node, node.clusterLabelPos)\n  })\n\n  svgClusters.selectAll('rect').each(function (c) {\n    const node = g.node(c)\n    const domCluster = d3.select(this)\n    util.applyStyle(domCluster, node.style)\n  })\n\n  util.applyTransition(svgClusters.exit(), g)\n    .style('opacity', 0)\n    .remove()\n\n  return svgClusters\n}\n\nexport default createClusters\n","import util from '../util'\n\nfunction addSVGLabel (root, node) {\n  const domNode = root\n\n  domNode.node().appendChild(node.label)\n\n  util.applyStyle(domNode, node.labelStyle)\n\n  return domNode\n}\n\nexport default addSVGLabel\n","import util from '../util'\n\nfunction addHtmlLabel (root, node) {\n  const fo = root\n    .append('foreignObject')\n    .attr('width', '100000')\n\n  const div = fo\n    .append('xhtml:div')\n  div.attr('xmlns', 'http://www.w3.org/1999/xhtml')\n\n  const label = node.label\n  switch (typeof label) {\n    case 'function':\n      div.insert(label)\n      break\n    case 'object':\n      // Currently we assume this is a DOM object.\n      div.insert(function () { return label })\n      break\n    default: div.html(label)\n  }\n\n  util.applyStyle(div, node.labelStyle)\n  div.style('display', 'inline-block')\n  // Fix for firefox\n  div.style('white-space', 'nowrap')\n\n  const client = div.node().getBoundingClientRect()\n  fo\n    .attr('width', client.width)\n    .attr('height', client.height)\n\n  return fo\n}\n\nexport default addHtmlLabel\n","import util from '../util'\n\n/*\n * Attaches a text label to the specified root. Handles escape sequences.\n */\nfunction addTextLabel (root, node) {\n  const domNode = root.append('text')\n\n  const lines = processEscapeSequences(node.label).split('\\n')\n  for (let i = 0; i < lines.length; i += 1) {\n    domNode\n      .append('tspan')\n      .attr('xml:space', 'preserve')\n      .attr('dy', '1em')\n      .attr('x', '1')\n      .text(lines[i])\n  }\n\n  util.applyStyle(domNode, node.labelStyle)\n\n  return domNode\n}\n\nfunction processEscapeSequences (text) {\n  let newText = ''\n  let escaped = false\n  let ch = null\n  for (let i = 0; i < text.length; i += 1) {\n    ch = text[i]\n    if (escaped) {\n      switch (ch) {\n        case 'n': newText += '\\n'; break\n        default: newText += ch\n      }\n      escaped = false\n    } else if (ch === '\\\\') {\n      escaped = true\n    } else {\n      newText += ch\n    }\n  }\n  return newText\n}\n\nexport default addTextLabel\n","import _ from 'lodash'\nimport * as d3 from 'd3'\n\nimport addLabel from './label/add-label'\nimport util from './util'\n\nfunction createNodes (selection, g, shapes) {\n  const simpleNodes = g.nodes().filter(function (v) { return !util.isSubgraph(g, v) })\n  let svgNodes = selection.selectAll('g.node')\n    .data(simpleNodes, function (v) { return v })\n    .classed('update', true)\n\n  svgNodes.selectAll('*').remove()\n  svgNodes.enter()\n    .append('g')\n    .attr('class', 'node')\n    .style('opacity', 0)\n\n  svgNodes = selection.selectAll('g.node')\n\n  svgNodes.each(function (v) {\n    const node = g.node(v)\n    const thisGroup = d3.select(this)\n    util.applyClass(thisGroup, node['class'], (thisGroup.classed('update') ? 'update ' : '') + 'node')\n    const labelGroup = thisGroup.append('g').attr('class', 'label')\n    const labelDom = addLabel(labelGroup, node)\n    const shape = shapes[node.shape]\n    const bbox = _.pick(labelDom.node().getBBox(), 'width', 'height')\n\n    node.elem = this\n\n    if (node.id) { thisGroup.attr('id', node.id) }\n    if (node.labelId) { labelGroup.attr('id', node.labelId) }\n\n    if (_.has(node, 'width')) { bbox.width = node.width }\n    if (_.has(node, 'height')) { bbox.height = node.height }\n\n    bbox.width += node.paddingLeft + node.paddingRight\n    bbox.height += node.paddingTop + node.paddingBottom\n    labelGroup.attr('transform', 'translate(' +\n      ((node.paddingLeft - node.paddingRight) / 2) + ',' +\n      ((node.paddingTop - node.paddingBottom) / 2) + ')')\n\n    const shapeSvg = shape(d3.select(this), bbox, node)\n    util.applyStyle(shapeSvg, node.style)\n\n    const shapeBBox = shapeSvg.node().getBBox()\n    node.width = shapeBBox.width\n    node.height = shapeBBox.height\n  })\n\n  util.applyTransition(svgNodes.exit(), g)\n    .style('opacity', 0)\n    .remove()\n\n  return svgNodes\n}\n\nexport default createNodes\n","import * as d3 from 'd3'\nimport util from './util'\n\nfunction positionClusters (selection, g) {\n  const created = selection.filter(function () { return !d3.select(this).classed('update') })\n\n  function translate (v) {\n    const node = g.node(v)\n    return 'translate(' + node.x + ',' + node.y + ')'\n  }\n\n  created.attr('transform', translate)\n\n  util.applyTransition(selection, g)\n    .style('opacity', 1)\n    .attr('transform', translate)\n\n  util.applyTransition(created.selectAll('rect'), g)\n    .attr('width', function (v) { return g.node(v).width })\n    .attr('height', function (v) { return g.node(v).height })\n    .attr('x', function (v) {\n      const node = g.node(v)\n      return -node.width / 2\n    })\n    .attr('y', function (v) {\n      const node = g.node(v)\n      return -node.height / 2\n    })\n}\n\nexport default positionClusters\n","import * as d3 from 'd3'\nimport _ from 'lodash'\n\nimport util from './util'\n\nfunction positionEdgeLabels (selection, g) {\n  const created = selection.filter(function () { return !d3.select(this).classed('update') })\n\n  function translate (e) {\n    const edge = g.edge(e)\n    return _.has(edge, 'x') ? 'translate(' + edge.x + ',' + edge.y + ')' : ''\n  }\n\n  created.attr('transform', translate)\n\n  util.applyTransition(selection, g)\n    .style('opacity', 1)\n    .attr('transform', translate)\n}\n\nexport default positionEdgeLabels\n","import * as d3 from 'd3'\n\nimport util from './util'\n\nfunction positionNodes (selection, g) {\n  const created = selection.filter(function () { return !d3.select(this).classed('update') })\n\n  function translate (v) {\n    const node = g.node(v)\n    return 'translate(' + node.x + ',' + node.y + ')'\n  }\n\n  created.attr('transform', translate)\n\n  util.applyTransition(selection, g)\n    .style('opacity', 1)\n    .attr('transform', translate)\n}\n\nexport default positionNodes\n","module.exports = require(\"dagre-layout\");","import _ from 'lodash'\nimport dagre from 'dagre-layout'\nimport * as d3 from 'd3'\n\nimport positionNodes from './position-nodes'\nimport positionEdgeLabels from './position-edge-labels'\nimport positionClusters from './position-clusters'\nimport createNodes from './create-nodes'\nimport createClusters from './create-clusters'\nimport createEdgeLabels from './create-edge-labels'\nimport createEdgePaths from './create-edge-paths'\nimport shapes from './shapes'\nimport arrows from './arrows'\n\n// This design is based on http://bost.ocks.org/mike/chart/.\nfunction render () {\n  let _createNodes = createNodes\n  let _createClusters = createClusters\n  let _createEdgeLabels = createEdgeLabels\n  let _createEdgePaths = createEdgePaths\n  let _shapes = shapes\n  let _arrows = arrows\n\n  const fn = function (svg, g) {\n    preProcessGraph(g)\n\n    svg.selectAll('*').remove()\n\n    const outputGroup = createOrSelectGroup(svg, 'output')\n    const clustersGroup = createOrSelectGroup(outputGroup, 'clusters')\n    const edgePathsGroup = createOrSelectGroup(outputGroup, 'edgePaths')\n    const edgeLabels = _createEdgeLabels(createOrSelectGroup(outputGroup, 'edgeLabels'), g)\n    const nodes = _createNodes(createOrSelectGroup(outputGroup, 'nodes'), g, _shapes)\n\n    dagre.layout(g)\n\n    let minX = 1000\n    let minY = 1000\n    let maxX = -1000\n    let maxY = -1000\n\n    const graph = g\n    graph.nodes().map(n => graph.node(n)).forEach(node => {\n      minX = Math.min(minX, node.x - node.width / 2)\n      minY = Math.min(minY, node.y - node.height / 2)\n      maxX = Math.max(maxX, node.x + node.width / 2)\n      maxY = Math.max(maxY, node.y + node.height / 2)\n    })\n\n    graph.edges().forEach(e => {\n      const edge = graph.edge(e)\n      if (edge.label !== undefined && edge.x !== undefined && edge.y !== undefined) {\n        minX = Math.min(minX, edge.x - edge.width / 2)\n        minY = Math.min(minY, edge.y - edge.height / 2)\n        maxX = Math.max(maxX, edge.x + edge.width / 2)\n        maxY = Math.max(maxY, edge.y + edge.height / 2)\n      }\n      const points = edge.points.slice(1, edge.points.length - 1) // intersetion points don't matter\n      for (let i = 0; i < points.length; i++) {\n        const point = points[i]\n        minX = Math.min(minX, point.x)\n        minY = Math.min(minY, point.y)\n        maxX = Math.max(maxX, point.x)\n        maxY = Math.max(maxY, point.y)\n      }\n    })\n\n    graph.minX = minX\n    graph.minY = minY\n    graph.maxX = maxX\n    graph.maxY = maxY\n\n    positionNodes(nodes, g)\n    positionEdgeLabels(edgeLabels, g)\n    _createEdgePaths(edgePathsGroup, g, _arrows)\n\n    const clusters = _createClusters(clustersGroup, g)\n    positionClusters(clusters, g)\n\n    postProcessGraph(g)\n  }\n\n  fn.createNodes = function (value) {\n    if (!arguments.length) {\n      return _createNodes\n    }\n    _createNodes = value\n    return fn\n  }\n\n  fn.createClusters = function (value) {\n    if (!arguments.length) {\n      return _createClusters\n    }\n    _createClusters = value\n    return fn\n  }\n\n  fn.createEdgeLabels = function (value) {\n    if (!arguments.length) {\n      return _createEdgeLabels\n    }\n    _createEdgeLabels = value\n    return fn\n  }\n\n  fn.createEdgePaths = function (value) {\n    if (!arguments.length) {\n      return _createEdgePaths\n    }\n    _createEdgePaths = value\n    return fn\n  }\n\n  fn.shapes = function (value) {\n    if (!arguments.length) {\n      return _shapes\n    }\n    _shapes = value\n    return fn\n  }\n\n  fn.arrows = function (value) {\n    if (!arguments.length) {\n      return _arrows\n    }\n    _arrows = value\n    return fn\n  }\n\n  return fn\n}\n\nconst NODE_DEFAULT_ATTRS = {\n  paddingLeft: 10,\n  paddingRight: 10,\n  paddingTop: 10,\n  paddingBottom: 10,\n  rx: 0,\n  ry: 0,\n  shape: 'rect'\n}\n\nconst EDGE_DEFAULT_ATTRS = {\n  arrowhead: 'normal',\n  curve: d3.curveLinear\n}\n\nfunction preProcessGraph (g) {\n  g.nodes().forEach(function (v) {\n    const node = g.node(v)\n    if (!_.has(node, 'label') && !g.children(v).length) { node.label = v }\n\n    if (_.has(node, 'paddingX')) {\n      _.defaults(node, {\n        paddingLeft: node.paddingX,\n        paddingRight: node.paddingX\n      })\n    }\n\n    if (_.has(node, 'paddingY')) {\n      _.defaults(node, {\n        paddingTop: node.paddingY,\n        paddingBottom: node.paddingY\n      })\n    }\n\n    if (_.has(node, 'padding')) {\n      _.defaults(node, {\n        paddingLeft: node.padding,\n        paddingRight: node.padding,\n        paddingTop: node.padding,\n        paddingBottom: node.padding\n      })\n    }\n\n    _.defaults(node, NODE_DEFAULT_ATTRS)\n\n    _.each(['paddingLeft', 'paddingRight', 'paddingTop', 'paddingBottom'], function (k) {\n      node[k] = Number(node[k])\n    })\n\n    // Save dimensions for restore during post-processing\n    if (_.has(node, 'width')) { node._prevWidth = node.width }\n    if (_.has(node, 'height')) { node._prevHeight = node.height }\n  })\n\n  g.edges().forEach(function (e) {\n    const edge = g.edge(e)\n    if (!_.has(edge, 'label')) { edge.label = '' }\n    _.defaults(edge, EDGE_DEFAULT_ATTRS)\n  })\n}\n\nfunction postProcessGraph (g) {\n  _.each(g.nodes(), function (v) {\n    const node = g.node(v)\n\n    // Restore original dimensions\n    if (_.has(node, '_prevWidth')) {\n      node.width = node._prevWidth\n    } else {\n      delete node.width\n    }\n\n    if (_.has(node, '_prevHeight')) {\n      node.height = node._prevHeight\n    } else {\n      delete node.height\n    }\n\n    delete node._prevWidth\n    delete node._prevHeight\n  })\n}\n\nfunction createOrSelectGroup (root, name) {\n  let selection = root.select('g.' + name)\n  if (selection.empty()) {\n    selection = root.append('g').attr('class', name)\n  }\n  return selection\n}\n\nexport default render\n","/*\n * Returns the point at which two lines, p and q, intersect or returns\n * undefined if they do not intersect.\n */\nfunction intersectLine (p1, p2, q1, q2) {\n  // Algorithm from J. Avro, (ed.) Graphics Gems, No 2, Morgan Kaufmann, 1994,\n  // p7 and p473.\n\n  // Compute a1, b1, c1, where line joining points 1 and 2 is F(x,y) = a1 x +\n  // b1 y + c1 = 0.\n  const a1 = p2.y - p1.y\n  const b1 = p1.x - p2.x\n  const c1 = (p2.x * p1.y) - (p1.x * p2.y)\n\n  // Compute r3 and r4.\n  const r3 = ((a1 * q1.x) + (b1 * q1.y) + c1)\n  const r4 = ((a1 * q2.x) + (b1 * q2.y) + c1)\n\n  // Check signs of r3 and r4. If both point 3 and point 4 lie on\n  // same side of line 1, the line segments do not intersect.\n  if ((r3 !== 0) && (r4 !== 0) && sameSign(r3, r4)) {\n    return /* DONT_INTERSECT */\n  }\n\n  // Compute a2, b2, c2 where line joining points 3 and 4 is G(x,y) = a2 x + b2 y + c2 = 0\n  const a2 = q2.y - q1.y\n  const b2 = q1.x - q2.x\n  const c2 = (q2.x * q1.y) - (q1.x * q2.y)\n\n  // Compute r1 and r2\n  const r1 = (a2 * p1.x) + (b2 * p1.y) + c2\n  const r2 = (a2 * p2.x) + (b2 * p2.y) + c2\n\n  // Check signs of r1 and r2. If both point 1 and point 2 lie\n  // on same side of second line segment, the line segments do\n  // not intersect.\n  if ((r1 !== 0) && (r2 !== 0) && (sameSign(r1, r2))) {\n    return /* DONT_INTERSECT */\n  }\n\n  // Line segments intersect: compute intersection point.\n  const denom = (a1 * b2) - (a2 * b1)\n  if (denom === 0) {\n    return /* COLLINEAR */\n  }\n\n  const offset = Math.abs(denom / 2)\n\n  // The denom/2 is to get rounding instead of truncating. It\n  // is added or subtracted to the numerator, depending upon the\n  // sign of the numerator.\n  let num = (b1 * c2) - (b2 * c1)\n  const x = (num < 0) ? ((num - offset) / denom) : ((num + offset) / denom)\n\n  num = (a2 * c1) - (a1 * c2)\n  const y = (num < 0) ? ((num - offset) / denom) : ((num + offset) / denom)\n\n  return { x, y }\n}\n\nfunction sameSign (r1, r2) {\n  return r1 * r2 > 0\n}\n\nexport default intersectLine\n","import node from './intersect-node'\nimport circle from './intersect-circle'\nimport ellipse from './intersect-ellipse'\nimport polygon from './intersect-polygon'\nimport rect from './intersect-rect'\n\nexport default {\n  node,\n  circle,\n  ellipse,\n  polygon,\n  rect\n}\n","import intersect from './lib/intersect'\nimport render from './lib/render'\nimport util from './lib/util'\n\nexport default {\n  intersect,\n  render,\n  util\n}\n"],"sourceRoot":""}